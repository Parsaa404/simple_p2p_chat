# P2P Secure Messenger (GUI Version - In Development)

این پروژه یک پیام‌رسان نظیر به نظیر (P2P) امن با رابط کاربری گرافیکی (GUI) است که با پایتون و PyQt توسعه داده می‌شود.
هدف، ایجاد یک پیام‌رسان کاملاً غیرمتمرکز، بدون نیاز به ثبت‌نام، با رمزنگاری سرتاسری قوی و ویژگی‌های پیشرفته است.

**وضعیت فعلی: در حال توسعه فعال - فاز ۱ (پایه‌ریزی و هسته امن شبکه)**

## نقشه راه و ویژگی‌های برنامه‌ریزی شده

### فاز ۱: پایه‌ریزی و هسته امن شبکه (در حال انجام)
*   **بازنگری ساختار پروژه:** ایجاد ساختار ماژولار برای GUI، شبکه، امنیت و منطق برنامه.
*   **ارتباطات شبکه با TCP:** جایگزینی UDP با TCP برای ارسال پیام قابل اعتماد.
*   **مکانیزم تبادل کلید Diffie-Hellman:** برای تولید کلید جلسه مشترک به صورت امن.
*   **رمزنگاری ارتباطات با کلید جلسه:** استفاده از کلید جلسه مشتق شده از DH برای رمزنگاری تمام پیام‌ها (با استفاده از Fernet یا AES-GCM).
*   **تست اولیه بدون GUI:** برای اطمینان از صحت عملکرد هسته شبکه و رمزنگاری.

### فاز ۲: پیاده‌سازی GUI (مراحل اولیه)
*   **طراحی و پیاده‌سازی پنجره اصلی GUI با PyQt:** شامل نمایش چت، ورودی پیام، لیست همتاها.
*   **اتصال GUI به هسته پیام‌رسانی:** ارسال و دریافت پیام از طریق GUI.

### فازهای بعدی
*   **کشف همتا در شبکه محلی (LAN Peer Discovery):** شناسایی خودکار سایر کاربران در شبکه محلی.
*   **ذخیره‌سازی تاریخچه چت:** به صورت محلی و رمزنگاری شده.
*   **ارسال فایل:** قابلیت ارسال و دریافت امن فایل‌ها.
*   **بهبودهای امنیتی:**
    *   تأیید هویت همتا (جلوگیری از حملات Man-in-the-Middle پس از اولین ارتباط).
    *   بررسی استفاده از Perfect Forward Secrecy.
*   **بهبودهای رابط کاربری (UX):**
    *   اطلاع‌رسانی‌ها (Notifications).
    *   تنظیمات برنامه پیشرفته.
    *   ظاهر و احساس حرفه‌ای‌تر.
*   **مستندسازی جامع و تست کامل.**
*   **بسته‌بندی برنامه (اختیاری):** ایجاد فایل اجرایی مستقل.

## پیش‌نیازها

*   Python 3.x
*   PyQt5 (یا PyQt6 در آینده)
*   Cryptography

## نصب (برای توسعه‌دهندگان در این مرحله)

1.  **کلون کردن پروژه:**
    ```bash
    git clone <repository_url> # URL مخزن پس از ایجاد ارائه می‌شود
    cd <project_directory>
    ```
2.  **ایجاد و فعال‌سازی محیط مجازی (توصیه می‌شود):**
    ```bash
    python -m venv venv
    source venv/bin/activate  # On Windows: venv\Scripts\activate
    ```
3.  **نصب وابستگی‌ها:**
    ```bash
    pip install -r requirements.txt
    ```

## اجرای برنامه (در طول توسعه)

فایل اصلی برای اجرای برنامه `main.py` خواهد بود.
```bash
python main.py
```
در مراحل اولیه توسعه، ممکن است نیاز به اجرای مستقیم ماژول‌های خاص برای تست باشد:
```bash
python gui/gui_main_window.py # برای تست پنجره اصلی GUI به تنهایی
python network_core/tcp_handler.py # برای تست مستقیم کلاس‌های TCP
python security/diffie_hellman.py # برای تست تبادل کلید DH
python security/session_crypto.py # برای تست رمزنگاری جلسه
```

## ساختار پروژه (در حال شکل‌گیری)

*   `main.py`: نقطه ورود اصلی برنامه.
*   `app_logic/`: شامل کنترل‌کننده اصلی و منطق برنامه.
    *   `main_controller.py`: ارکستریتور اصلی بین GUI و بک‌اند.
*   `gui/`: شامل تمام کدهای مربوط به رابط کاربری گرافیکی (PyQt).
    *   `gui_main_window.py`: تعریف پنجره اصلی برنامه.
    *   سایر ویجت‌ها و دیالوگ‌های سفارشی...
*   `network_core/`: مدیریت ارتباطات شبکه.
    *   `tcp_handler.py`: کلاس‌ها برای سرور و کلاینت TCP.
    *   `udp_legacy.py`: کد UDP از نسخه قبلی (برای مرجع).
    *   (در آینده) `peer_discovery.py`: برای کشف همتا در LAN.
*   `security/`: ماژول‌های مربوط به رمزنگاری و امنیت.
    *   `diffie_hellman.py`: پیاده‌سازی تبادل کلید Diffie-Hellman.
    *   `session_crypto.py`: رمزنگاری/رمزگشایی پیام‌های جلسه با کلید مشتق شده.
    *   `simple_fernet.py`: کد رمزنگاری ساده Fernet از نسخه قبلی (برای مرجع).
*   `assets/` (اختیاری): برای آیکون‌ها، تصاویر و سایر منابع.
*   `tests/` (اختیاری): برای تست‌های واحد و یکپارچه‌سازی.
*   `requirements.txt`: لیست وابستگی‌های پایتون.
*   `README.md`: همین فایل.

---
این پروژه با هدف یادگیری و ایجاد یک ابزار ارتباطی امن و خصوصی توسعه داده می‌شود.
مشارکت و ارائه بازخورد مورد استقبال قرار خواهد گرفت (پس از عمومی شدن مخزن).
